{
  "variables": {
    "site_type": "",
    "mysql_password": "",
    "virtuoso_password": ""

  },
  "builders": [{
    "type": "docker",
    "image": "ubuntu:14.04",
    "commit": true
  }],
  "provisioners":[ {
    "type": "shell",
    "execute_command": "{{ .Vars }} sudo -E sh '{{ .Path }}'",
    "inline": [
      "apt-get update",
      "apt-get install curl -y",
      "[ ! -d /etc/salt ] && mkdir /etc/salt",
      "echo 'provider: docker' >> /etc/salt/grains",
      "echo 'site_type: {{user `site_type`}}' >> /etc/salt/grains",
      "echo 'mysql_password: {{user `mysql_password`}}' >> /etc/salt/grains",
      "echo 'virtuoso_password: {{user `virtuoso_password`}}' >> /etc/salt/grains",
      "echo 'doc_root: {{user `doc_root`}}' >> /etc/salt/grains"
    ]
  },{
    "type": "salt-masterless",
    "local_state_tree": "salt"
  }]
}
